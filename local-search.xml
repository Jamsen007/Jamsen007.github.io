<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Spring AOP åˆ†æ(ä¸€)</title>
    <link href="/2025/03/15/SpringAOP%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2025/03/15/SpringAOP%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring-AOP-åˆ†æ-ä¸€"><a href="#Spring-AOP-åˆ†æ-ä¸€" class="headerlink" title="Spring AOP åˆ†æ(ä¸€)"></a>Spring AOP åˆ†æ(ä¸€)</h1><h2 id="ä¸€ã€å‰æ"><a href="#ä¸€ã€å‰æ" class="headerlink" title="ä¸€ã€å‰æ"></a>ä¸€ã€å‰æ</h2><ul><li>æœ¬æ–‡åŸºäºspring-aopåŒ…5.3.20ç‰ˆæœ¬ä½œä¸ºå‰æã€‚</li><li>spring-aopæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œaopæ˜¯æŒ‡ä½¿ç”¨åˆ‡é¢æ–¹å¼è¿›è¡Œç¼–ç¨‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå‰å’Œæ‰§è¡Œååšå¤„ç†ã€‚</li></ul><h2 id="äºŒã€åŸºç¡€çŸ¥è¯†"><a href="#äºŒã€åŸºç¡€çŸ¥è¯†" class="headerlink" title="äºŒã€åŸºç¡€çŸ¥è¯†"></a>äºŒã€åŸºç¡€çŸ¥è¯†</h2><h3 id="ä»£ç†æ–¹å¼"><a href="#ä»£ç†æ–¹å¼" class="headerlink" title="ä»£ç†æ–¹å¼"></a>ä»£ç†æ–¹å¼</h3><ol><li><p>é™æ€ä»£ç†</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ä»£ç†æ¨¡å¼å¯ä»¥åœ¨ä¸ä¿®æ”¹è¢«ä»£ç†å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡æ‰©å±•ä»£ç†ç±»ï¼Œè¿›è¡Œä¸€äº›åŠŸèƒ½çš„é™„åŠ ä¸å¢å¼ºã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»£ç†ç±»å’Œè¢«ä»£ç†ç±»åº”è¯¥å…±åŒå®ç°ä¸€ä¸ªæ¥å£ï¼Œæˆ–è€…æ˜¯å…±åŒç»§æ‰¿æŸä¸ªç±»ã€‚<br></code></pre></td></tr></table></figure></li><li><p>åŠ¨æ€ä»£ç†</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs less">é™æ€ä»£ç†çš„ä»£ç†ç±»éœ€è¦å®ç°ä¸ç›®æ ‡ç±»ä¸€æ ·çš„æ¥å£ã€‚è€ŒåŠ¨æ€ä»£ç†ä¸éœ€è¦ã€‚åªéœ€è¦å®ç°<span class="hljs-selector-tag">InvocationHandler</span>ç±»ï¼›<br>åŒæ—¶åˆ†ä¸ºä¸¤ç§ä»£ç†æ–¹å¼ï¼š<br><span class="hljs-selector-tag">jdk</span>åŠ¨æ€ä»£ç†(Proxyç±»å’ŒInvocationHandleræ¥å£æ¥å®ç°åŠ¨æ€ä»£ç†)<br><span class="hljs-selector-tag">cglib</span>åŠ¨æ€ä»£ç†(ç»§æ‰¿MethodInterceptorç±»ä½¿ç”¨Enhancerç±»åˆ›å»ºä»£ç†å¯¹è±¡)<br></code></pre></td></tr></table></figure></li></ol><h3 id="spring-aopä¸­åŸºç¡€æœ¯è¯­"><a href="#spring-aopä¸­åŸºç¡€æœ¯è¯­" class="headerlink" title="spring-aopä¸­åŸºç¡€æœ¯è¯­"></a>spring-aopä¸­åŸºç¡€æœ¯è¯­</h3><ul><li><strong>Aspect</strong>ï¼šåˆ‡é¢ã€‚æ¯”å¦‚è¢«@Aspectæ³¨è§£çš„ç±»å°±æ˜¯åˆ‡é¢ï¼Œç†è§£ä¸ºè®°å½•å…³ç³»çš„ç±»ã€‚</li><li><strong>Join point</strong>ï¼šè¿æ¥ç‚¹ã€‚å¯ä»¥ç†è§£ä¸ºç¨‹åºé‡Œé¢çš„ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚</li><li><strong>Advice</strong>ï¼šé€šçŸ¥ã€‚åœ¨æŒ‡å®šçš„è¿æ¥ç‚¹æ‰§è¡Œçš„åŠ¨ä½œæ—¶æœºï¼Œç†è§£ä¸ºä¸€ä¸ªæ–¹æ³•ï¼›åŒæ—¶Adviceåˆ†ä¸ºä¸åŒçš„ç±»å‹ï¼ˆbeforeã€afterã€aroundï¼‰ï¼ŒSpringæ¡†æ¶ä¸­ä¼šç”¨Interceptoræ‹¦æˆªå™¨æ¥å®ç°Adviceï¼Œæ¯ä¸ªè¿æ¥ç‚¹å¯¹åº”ä¸€ä¸ªInterceptoré“¾ã€‚</li><li><strong>Pointcut</strong>ï¼šåˆ‡ç‚¹ã€‚ç”¨æ¥åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥ç‚¹ï¼ŒAdviceä¸åˆ‡ç‚¹è¡¨è¾¾å¼æ˜¯å…³è”åœ¨ä¸€èµ·çš„ï¼ŒAdviceå°†ä¼šæ‰§è¡Œåœ¨å’Œåˆ‡ç‚¹è¡¨è¾¾å¼æ‰€åŒ¹é…çš„è¿æ¥ç‚¹ä¸Šã€‚</li><li><strong>Weaving</strong>ï¼šç»‡å…¥ã€‚åˆ›å»ºä»£ç†å¯¹è±¡çš„åŠ¨ä½œï¼Œè¿™ä¸ªåŠ¨ä½œå¯ä»¥å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶æœŸï¼ˆæ¯”å¦‚Aspejctjï¼‰ï¼Œæˆ–è€…è¿è¡Œæ—¶ï¼Œæ¯”å¦‚Spring AOPã€‚</li><li><strong>Target object</strong>ï¼šç›®æ ‡å¯¹è±¡ï¼Œè¢«ä»£ç†çš„å¯¹è±¡ã€‚</li><li><strong>advistor</strong>ï¼šé¡¾é—®ã€‚åŒ…å«ä¸€ä¸ªPointcutå’Œä¸€ä¸ªadviceï¼Œè€Œaspectå¯ä»¥å¤šä¸ªpointcutå’Œå¤šä¸ªadviceã€‚ç†è§£ä¸ºæŠŠadviceå’ŒPointcutå°è£…æˆä¸€ä¸ªadvistorã€‚</li></ul><h3 id="adviceåœ¨spring-aopä¸­å¯¹åº”çš„ç±»"><a href="#adviceåœ¨spring-aopä¸­å¯¹åº”çš„ç±»" class="headerlink" title="adviceåœ¨spring-aopä¸­å¯¹åº”çš„ç±»"></a>adviceåœ¨spring-aopä¸­å¯¹åº”çš„ç±»</h3><ul><li><strong>@Before</strong>ï¼šAspectJMethodBeforeAdviceï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªMethodBeforeAdviceã€‚</li><li><strong>@AfterReturning</strong>ï¼šAspectJAfterReturningAdviceï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªAfterReturningAdviceã€‚</li><li><strong>@AfterThrowing</strong>ï¼šAspectJAfterThrowingAdviceï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªMethodInterceptorã€‚</li><li><strong>@After</strong>ï¼šAspectJAfterAdviceï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªMethodInterceptorã€‚</li><li><strong>@Around</strong>ï¼šAspectJAroundAdviceï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªMethodInterceptor</li></ul><p>å…³ç³»å›¾</p><p><img src="/hexo-blog/img/page/img-relation.png" alt="config"></p><p>å·¦è¾¹ç±»å®ç°å³è¾¹çš„ç±»ï¼š</p><p><strong>AspectJAfterAdvice-&gt;MethodInterceptor, AfterAdvice</strong><br><strong>AspectJAfterThrowingAdvice-&gt;MethodInterceptor, AfterAdvice</strong><br><strong>AspectJAroundAdvice-&gt;MethodInterceptor</strong></p><p><strong>AspectJMethodBeforeAdvice-&gt;MethodBeforeAdvice-&gt;BeforeAdvice</strong><br><strong>AspectJAfterReturningAdvice-&gt;AfterReturningAdvice-&gt;AfterAdvice</strong></p><p>å‰é¢3ä¸ªå®ç°çš„åŸç†å°±æ˜¯ä¾èµ–<strong>MethodInterceptor</strong>ï¼Œåé¢ä¸¤ä¸ªåˆ†åˆ«ä¾èµ–<strong>MethodBeforeAdviceInterceptor</strong>å’Œ<strong>AfterReturningAdviceInterceptor</strong>ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªè¿˜æ˜¯å®ç°äº†<strong>MethodInterceptor</strong>ã€‚å› æ­¤å®ƒä»¬ä¼šç»„æˆä¸€æ¡Interceptoré“¾è·¯ã€‚</p><h2 id="ä¸‰ã€ä»£ç ä¾‹å­"><a href="#ä¸‰ã€ä»£ç ä¾‹å­" class="headerlink" title="ä¸‰ã€ä»£ç ä¾‹å­"></a>ä¸‰ã€ä»£ç ä¾‹å­</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: å…±åŒä¸šåŠ¡æ¥å£</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gongjuncheng</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICommonService</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(String name)</span></span>;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: è¢«ä»£ç†ç±»ï¼Œå®ç°åŒä¸€æ¥å£</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gongjuncheng</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TargetServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ICommonService</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‘æ•°æ®åº“ä¸­æ’å…¥åä¸ºï¼š  &quot;</span>+name+<span class="hljs-string">&quot; çš„ç”¨æˆ·&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: ä»£ç†ç±»ï¼Œå¹¶ä¸”å®ç°åŒä¸€æ¥å£</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gongjuncheng</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ICommonService</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¢«ä»£ç†å¯¹è±¡(ç›®æ ‡å¯¹è±¡)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> ICommonService target;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€šè¿‡æ„é€ æ–¹æ³•æ³¨å…¥è¢«ä»£ç†å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> object</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProxyServiceImpl</span><span class="hljs-params">(ICommonService object)</span></span>&#123;<br>        <span class="hljs-keyword">this</span>.target = object;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(String name)</span></span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‡†å¤‡å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®&quot;</span>);<br>        target.add(name);<br>        System.out.println(<span class="hljs-string">&quot;æ’å…¥æ•°æ®åº“æˆåŠŸ&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: æµ‹è¯•é™æ€ä»£ç†</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gong juncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyTestStatic</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»£ç†æ¨¡å¼---é™æ€ä»£ç†</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        <span class="hljs-comment">// å®ä¾‹åŒ–éœ€è¦è¢«ä»£ç†çš„ç±»</span><br>        ICommonService target = <span class="hljs-keyword">new</span> TargetServiceImpl();<br>        <span class="hljs-comment">// é€šè¿‡ä»£ç†ç±»å¯¹ç›®æ ‡ç±»è¿›è¡Œä»£ç†ï¼Œå…¶å®å°±æ˜¯é¢å¤–å¯¹ç›®æ ‡ç±»çš„æŸä¸ªæ–¹æ³•è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œæ·»åŠ ç‚¹ä¸œè¥¿è€Œå·²</span><br>        ProxyServiceImpl proxy = <span class="hljs-keyword">new</span> ProxyServiceImpl(target);<br>        <span class="hljs-comment">// è°ƒç”¨ä»£ç†ç±»çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°±æ˜¯ç›®æ ‡ç±»çš„æ–¹æ³•ã€‚</span><br>        proxy.add(<span class="hljs-string">&quot;123&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h3><h4 id="jdkåŠ¨æ€ä»£ç†"><a href="#jdkåŠ¨æ€ä»£ç†" class="headerlink" title="jdkåŠ¨æ€ä»£ç†"></a>jdkåŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: å®ç°æ¥å£åŠ¨æ€ä»£ç†-æ¥å£</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gong juncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Subject</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(String name)</span></span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">(String msg)</span></span>;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: å®ç°æ¥å£åŠ¨æ€ä»£ç†-å®ç°ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gong juncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubjectImple</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Subject</span> </span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(String name)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‘æ•°æ®åº“ä¸­æ’å…¥åä¸ºï¼š  &quot;</span>+name+<span class="hljs-string">&quot; çš„ç”¨æˆ·&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">say</span><span class="hljs-params">(String msg)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;hello world,&quot;</span>+msg);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: å®ç°æ¥å£åŠ¨æ€ä»£ç†-ä»£ç†å·¥å…·ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gong juncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¢«ä»£ç†çš„ç›®æ ‡ç±»</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Object target;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ProxyInvocationHandler</span><span class="hljs-params">(Object target)</span></span>&#123;<br>        <span class="hljs-keyword">this</span>.target = target;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        <span class="hljs-comment">// åœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰ç®€å•çš„æ‰“å°ä¸€ä¸‹</span><br>        System.out.println(<span class="hljs-string">&quot;------------------before------------------&quot;</span>);<br><br>        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br>        Object result = method.invoke(target, args);<br><br>        <span class="hljs-comment">// åœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œä¹‹åç®€å•çš„æ‰“å°ä¸€ä¸‹</span><br>        System.out.println(<span class="hljs-string">&quot;-------------------after------------------&quot;</span>);<br><br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–è¢«ä»£ç†çš„ç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>&#123;<br><br>        <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.target.getClass().getClassLoader()<br>                ,<span class="hljs-keyword">this</span>.target.getClass().getInterfaces()<br>                ,<span class="hljs-keyword">this</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>: å®ç°æ¥å£åŠ¨æ€ä»£ç†-æµ‹è¯•å¯åŠ¨ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: gong juncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyTestDynamicInterface</span> </span>&#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»£ç†æ¨¡å¼---JDKåŠ¨æ€ä»£ç†</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;<br>        <span class="hljs-comment">// ä½¿ç”¨ä¼ ç»Ÿçš„ä»£ç†ç±»å®ç°InvocationHandleræ¥å£ï¼Œå†é€šè¿‡Proxyç±»çš„é™æ€æ–¹æ³•åˆ›å»ºä»£ç†ç±»</span><br><span class="hljs-comment">// 1.å®ä¾‹åŒ–ç­‰å¾…è¢«ä»£ç†çš„å®ç°ç±»</span><br>        Subject subject = <span class="hljs-keyword">new</span> SubjectImple();<br>        <span class="hljs-comment">// 2.å®ä¾‹åŒ–InvocationHandler ä»£ç†å¤„ç†å™¨</span><br>        ProxyInvocationHandler proxyInvocationHandler = <span class="hljs-keyword">new</span> ProxyInvocationHandler(subject);<br>        <span class="hljs-comment">// 3.æ ¹æ®è¢«ä»£ç†å®ç°ç±»ç”Ÿæˆä»£ç†å¯¹è±¡,è¿™ä¸ªgetProxyæ–¹æ³•å¯ä»¥ä¸å†™åœ¨ProxyInvocationHandleré‡Œé¢ï¼Œåœ¨è¿™é‡Œå†™ï¼ŒProxyInvocationHandlerå°±å¯ä»¥ç»™å¤šä¸ªéœ€è¦ä»£ç†çš„æ–¹æ³•å…±ç”¨ã€‚</span><br>        Subject proxySubject = (Subject) proxyInvocationHandler.getProxy();<br>        System.out.println(<span class="hljs-string">&quot;ä»£ç†ç±»è·¯å¾„ï¼š&quot;</span>+proxySubject.getClass());<br>        proxySubject.add(<span class="hljs-string">&quot;ç†Šå¤§&quot;</span>);<br>        proxySubject.say(<span class="hljs-string">&quot;my home&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="headerlink" title="cglibåŠ¨æ€ä»£ç†"></a>cglibåŠ¨æ€ä»£ç†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è¢«ä»£ç†ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> gongjuncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SourceClass</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">go</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;è¿›å‡»çš„å·¨äºº....&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sleep</span><span class="hljs-params">()</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å…¨ä¸–ç•Œé˜”ä»¥å®‰æ¯äº†...&quot;</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * cglibåŠ¨æ€ä»£ç†çš„æ‰§è¡Œç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> gongjuncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CglibProxyHandle</span></span>&#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¢«ä»£ç†ç±»</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Object target;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * cglibçš„æ‹¦æˆªå™¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> MethodInterceptor methodInterceptor;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CglibProxyHandle</span><span class="hljs-params">(Object target, MethodInterceptor methodInterceptor)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.target = target;<br>        <span class="hljs-keyword">this</span>.methodInterceptor = methodInterceptor;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–è¢«ä»£ç†çš„ç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>&#123;<br>        Enhancer enhancer = <span class="hljs-keyword">new</span> Enhancer();<br>        <span class="hljs-comment">// è®¾ç½®ä»£ç†ç±»çš„çˆ¶ç±»</span><br>        enhancer.setSuperclass(target.getClass());<br>        <span class="hljs-comment">// è®¾ç½®ä»£ç†é€»è¾‘</span><br>        enhancer.setCallback(methodInterceptor);<br>        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span><br>        <span class="hljs-keyword">return</span> enhancer.create();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * cglibçš„æ‹¦æˆªå™¨ï¼ŒçœŸæ­£å¤„ç†è¢«ä»£ç†ç±»çš„ä¸Šä¸‹æ–‡æ“ä½œ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> gongjuncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CglibProxyMethodInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MethodInterceptor</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">intercept</span><span class="hljs-params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;<br>        <span class="hljs-keyword">if</span> (method.getName().equals(<span class="hljs-string">&quot;go&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;è‰¾ä¼¦è€¶æ ¼å°”å¼€å§‹å‡ºç°&quot;</span>);<br>            methodProxy.invokeSuper(o,objects);<br>            System.out.println(<span class="hljs-string">&quot;å¤§å®¶å¿«è·‘å•Šï¼ï¼ï¼ï¼&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> methodProxy.invokeSuper(o, objects);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> gongjuncheng</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        CglibProxyHandle proxyHandle = <span class="hljs-keyword">new</span> CglibProxyHandle(<span class="hljs-keyword">new</span> SourceClass(),<span class="hljs-keyword">new</span> CglibProxyMethodInterceptor());<br>        SourceClass sourceClass = (SourceClass) proxyHandle.getProxy();<br>        System.out.println(<span class="hljs-string">&quot;ç”Ÿæˆçš„ä»£ç†ç±»çš„è·¯å¾„ï¼š&quot;</span>+sourceClass.getClass());<br>        sourceClass.go();<br>        sourceClass.sleep();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†AOPçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼ŒåŠ¨æ€ä»£ç†ä¸­jdkä»£ç†å’Œcglibä»£ç†çš„ä¸åŒï¼Œä»¥åŠä»£ç çš„å®ç°ã€‚</p><p>ä¸‹æ–‡ä¼šè®²ä¼šæ¶‰åŠéƒ¨åˆ†æºç çŸ¥è¯†ç‚¹ï¼Œæ•¬è¯·æœŸå¾…~~~</p>]]></content>
    
    
    <categories>
      
      <category>Spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gitee + Hexo + Fluid æ­å»ºä¸ªäººå…è´¹ç½‘ç«™</title>
    <link href="/2025/03/15/Gitee%20+%20Hexo%20+%20Fluid%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%85%8D%E8%B4%B9%E7%BD%91%E7%AB%99/"/>
    <url>/2025/03/15/Gitee%20+%20Hexo%20+%20Fluid%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%85%8D%E8%B4%B9%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<p><strong>é“¾æ¥</strong>ï¼š<br>1.<a href="https://hexo.io/">Hexo</a><br>2.<a href="https://gitee.com/">Gitee</a><br>3.<a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluidä¸»é¢˜</a>  </p><h2 id="å‡†å¤‡ç¯å¢ƒ"><a href="#å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡ç¯å¢ƒ"></a>å‡†å¤‡ç¯å¢ƒ</h2><h3 id="1-nodejs-npmçš„å®‰è£…"><a href="#1-nodejs-npmçš„å®‰è£…" class="headerlink" title="1. nodejs+npmçš„å®‰è£…"></a>1. nodejs+npmçš„å®‰è£…</h3><ul><li><strong>ä»nodejså®˜ç½‘ç›´æ¥ä¸‹è½½ï¼Œå¹¶ä¸”æ ¹æ®é¡ºåºå®‰è£…æ–‡ä»¶åˆ°å¯¹åº”çš„ä½ç½®ï¼Œå°±å®Œæˆ</strong><br>å› ä¸ºnodejså†…éƒ¨å·²ç»é›†æˆnpmï¼Œæ‰€ä»¥ä¸å¿…è¦åˆ†å¼€ä¸‹è½½ï¼Œåœ°å€:<a href="https://nodejs.org/">nodejs+npm</a></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ node -v  <br>$ npm -v<br></code></pre></td></tr></table></figure><p>ä¸Šé¢æ ¡éªŒæœ¬åœ°æ˜¯å¦å®‰è£…å®Œæˆï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/hexo-blog/img/page/node+npm.jpg" alt="npm,nodejs"></p><ul><li><strong>æ–°å»ºnode_globalå’Œnode_cacheæ–‡ä»¶å¤¹ï¼Œé¿å…npmå®‰è£…çš„ä¾èµ–å…¨éƒ¨å †ç§¯åˆ°é»˜è®¤ç›˜</strong></li></ul><p>å› ä¸ºé»˜è®¤çš„npmä¸‹è½½ä¾èµ–å®‰è£…è·¯å¾„éƒ½æ˜¯åœ¨ â€˜C:\Users\ä½ è‡ªå·±ç”µè„‘åå­—\AppData\Roaming\npmâ€™ è·¯å¾„ä¸‹é¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šæ›´æ”¹è¿™ä¸ªä½ç½®</p><p>1.åœ¨å®‰è£…nodejsçš„ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/hexo-blog/img/page/createFolder.png" alt="folder"></p><p>2.é…ç½®å…¨å±€ç¯å¢ƒå˜é‡</p><p>ç”¨æˆ·å˜é‡ï¼š<br>ç¼–è¾‘PATHï¼Œæ·»åŠ â€™C:\Program Files\nodejs\node_globalâ€™è·¯å¾„<br>ç³»ç»Ÿå˜é‡ï¼š<br>æ–°å»ºå˜é‡ï¼Œåå­—NODE_PATH,å€¼â€™C:\Program Files\nodejs\node_modulesâ€™</p><p>3.ç„¶åè¿è¡Œæ‰§è¡Œå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm config <span class="hljs-built_in">set</span> prefix <span class="hljs-string">&quot;C:\Program Files\nodejs\node_global&quot;</span>  <br>$ npm config <span class="hljs-built_in">set</span> cache <span class="hljs-string">&quot;C:\Program Files\nodejs\node_cache&quot;</span><br></code></pre></td></tr></table></figure><p>æœ€ånpmå®‰è£…çš„è·¯å¾„å°±ä¼šæ”¹å˜ï¼ŒæŸ¥çœ‹æ•ˆæœï¼Œå¦‚ä¸‹å›¾:<br><img src="/hexo-blog/img/page/npmPath.jpg" alt="path"></p><h3 id="2-Gitå®‰è£…"><a href="#2-Gitå®‰è£…" class="headerlink" title="2. Gitå®‰è£…"></a>2. Gitå®‰è£…</h3><p>ä»Gitå®˜ç½‘ä¸‹è½½ç¨³å®šçš„ç‰ˆæœ¬ï¼Œç„¶åå¼€å§‹æ— è„‘ç‚¹å‡»ä¸‹ä¸€æ­¥å®‰è£…å³å¯ã€‚<a href="https://git-scm.com/downloads">Gitåœ°å€</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git version<br></code></pre></td></tr></table></figure><p>ä¸Šé¢æ ¡éªŒæœ¬åœ°æ˜¯å¦å®‰è£…å®Œæˆï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="/hexo-blog/img/page/git.png" alt="git"></p><h2 id="å¼€å§‹æ­å»º"><a href="#å¼€å§‹æ­å»º" class="headerlink" title="å¼€å§‹æ­å»º"></a>å¼€å§‹æ­å»º</h2><h3 id="1-æ­å»ºHexoç½‘ç«™"><a href="#1-æ­å»ºHexoç½‘ç«™" class="headerlink" title="1. æ­å»ºHexoç½‘ç«™"></a>1. æ­å»ºHexoç½‘ç«™</h3><ul><li><p><strong>ä¸‹è½½è„šæ‰‹æ¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å…¨å±€å®‰è£…</span><br>$ npm install hexo-cli -g<br><span class="hljs-comment"># æŸ¥çœ‹hexoç‰ˆæœ¬</span><br>$ hexo -v<br><br><span class="hljs-comment">#å‡ºç°ä¸‹é¢çš„ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸ</span><br>hexo-cli: 4.3.0<br>os: win32 10.0.18363<br>node: 14.18.1<br>v8: 8.4.371.23-node.84<br>uv: 1.42.0<br>zlib: 1.2.11<br>brotli: 1.0.9<br>ares: 1.17.2<br>modules: 83<br>nghttp2: 1.42.0<br>napi: 8<br>llhttp: 2.1.4<br>openssl: 1.1.1l<br>cldr: 39.0<br>icu: 69.1<br>tz: 2021a<br>unicode: 13.0<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆå§‹åŒ–é¡¹ç›®</strong></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo init é¡¹ç›®åå­— <span class="hljs-comment"># åˆå§‹åŒ–</span><br><br>found 0 vulnerabilities<br>INFO  Start blogging with Hexo! <span class="hljs-comment">#å®‰è£…æˆåŠŸ</span><br><br>$ <span class="hljs-built_in">cd</span> é¡¹ç›®åå­— <span class="hljs-comment"># è¿›å…¥ç›®å½•</span><br>$ npm install <span class="hljs-comment"># å®‰è£…npm</span><br>$ hexo server <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span><br><br>INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop. <span class="hljs-comment"># éƒ¨ç½²æˆåŠŸ</span><br><br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ï¼š<br><img src="/hexo-blog/img/page/hexoSucceed.png" alt="succeed"></p><h3 id="2-éƒ¨ç½²ç½‘ç«™åˆ°Gitee"><a href="#2-éƒ¨ç½²ç½‘ç«™åˆ°Gitee" class="headerlink" title="2. éƒ¨ç½²ç½‘ç«™åˆ°Gitee"></a>2. éƒ¨ç½²ç½‘ç«™åˆ°Gitee</h3><ul><li><p><strong>åˆ›å»ºè´¦å·</strong><br>è¿™æ­¥å¯ä»¥è·³è¿‡äº†å§ï¼Œå“ˆå“ˆã€‚</p></li><li><p><strong>æ–°å»ºä»“åº“</strong></p></li></ul><p>ä»“åº“åç§°å’Œä»“åº“è·¯å¾„è¦å°½é‡ä¿æŒä¸€è‡´ã€‚</p><ul><li><strong>é…ç½®ssh</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global user.name <span class="hljs-string">&quot;&quot;</span> <span class="hljs-comment"># giteeç”¨æˆ·å</span><br>$ git config --global user.email <span class="hljs-string">&quot;&quot;</span>  <span class="hljs-comment"># é‚®ç®±</span><br><span class="hljs-comment"># ç”ŸæˆSSHå…¬é’¥å¹¶æ·»åŠ åˆ°giteeï¼Œå®ç°å…å¯†ç ç™»å½•</span><br><span class="hljs-comment"># 1ã€ç”Ÿæˆå…¬é’¥</span><br>ssh-keygen -t rsa -C <span class="hljs-string">&quot;# é‚®ç®±&quot;</span> <br></code></pre></td></tr></table></figure><p>æŠŠ C:\Users\ä¸»æœºå.ssh ç›®å½•ï¼ŒæŠŠ å¯†é’¥åå­—.pub é‡Œé¢çš„ä¿¡æ¯å¤åˆ¶åˆ°giteeçš„ SSHå…¬é’¥ </p><ul><li><strong>é…ç½®gitee pages</strong></li></ul><p>è¿›å…¥åˆ°ä»“åº“ï¼Œç‚¹å‡»ç®¡ç†é€‰é¡¹ï¼Œç‚¹å‡»é€‰é¡¹åˆå§‹åŒ– README.md å¿«é€Ÿå¼€å¯ SVNè®¿é—®ï¼Œç„¶åç‚¹å‡»æœåŠ¡ï¼Œé€‰æ‹©Gitee Pagesï¼Œå¦‚æœè¿™ä¸ªæ˜¯ç¬¬ä¸€æ¬¡æ“ä½œï¼Œéœ€è¦èº«ä»½è¯ä¸Šä¼ æ ¸å®ï¼Œç„¶åç­‰ä¸€å¤©å°±å¯ä»¥é‡æ–°å›åˆ°è¿™ä¸ªç•Œé¢æ“ä½œã€‚</p><p>ç„¶åæŒ‰ç…§ä¸‹å›¾æ“ä½œå³å¯ï¼š<br><img src="/hexo-blog/img/page/giteePagesConfig.png" alt="gitee pages"></p><ul><li><strong>é…ç½®é¡¹ç›®çš„_config.ymlæ–‡ä»¶</strong></li></ul><ol><li>ä¿®æ”¹urlä¸­çš„Gitee Pagesåœ°å€</li><li>è¯­è¨€å¯ä¿®æ”¹ä¸ºä¸­æ–‡language: zh-cn</li><li>deploy ä¿®æ”¹ä¸ºGitee Pages çš„åœ°å€</li></ol><p>å¦‚ä¸‹å›¾ï¼š<br><img src="/hexo-blog/img/page/updateConfig.png" alt="config"></p><p><img src="/hexo-blog/img/page/repo.jpg" alt="config"></p><ul><li><strong>éƒ¨ç½²é¡¹ç›®</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> é¡¹ç›®åå­—  <span class="hljs-comment">#è¿›å…¥é¡¹ç›®ç›®å½•</span><br>$ hexo clean <span class="hljs-comment">#æ¸…ç†ç¼“å­˜</span><br>$ hexo g <span class="hljs-comment">#ç”Ÿæˆç½‘ç«™æ–‡ä»¶</span><br>$ hexo s <span class="hljs-comment">#æœ¬åœ°æµ‹è¯•ä»£ç ï¼ŒCtrl+cåœæ­¢æœ¬åœ°æ˜ å°„</span><br>$ hexo d <span class="hljs-comment">#æ¨é€æœ¬åœ°ä»£ç åˆ°ç äº‘ï¼Œç¬¬ä¸€æ¨é€éœ€è¦è¾“å…¥giteeçš„è´¦å·å¯†ç  </span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæ¯æ¬¡éƒ¨ç½²äº†é¡¹ç›®ï¼Œéƒ½è¦åœ¨Gitee Pagesé‡Œé¢ç‚¹å‡»æ›´æ–°</p><h3 id="3-æ­é…Fluidä¸»é¢˜"><a href="#3-æ­é…Fluidä¸»é¢˜" class="headerlink" title="3. æ­é…Fluidä¸»é¢˜"></a>3. æ­é…Fluidä¸»é¢˜</h3><p><strong>åˆ›å»ºfluidçš„é…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¼šæ°¸ä¹…è¦†ç›–_config.ymlæ–‡ä»¶</strong></p><p>ä¿®æ”¹_config.ymlçš„é…ç½®ï¼Œæ‰¾åˆ°themeï¼ŒæŒ‡å®šä¸»é¢˜ä¸ºï¼šfluid</p><p>åœ¨_config.ymlåŒç›®å½•åˆ›å»º_config.fluid.ymlæ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹ç›´æ¥æ‹·è´<a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml">è¿™é‡Œ</a></p><p>ç„¶åé‡å¯ï¼Œå°±å®Œæˆäº†ã€‚</p><p>å¦‚éœ€è¦ç»§ç»­ç¼–è¾‘æˆ–è€…å†™æ–‡ç« ï¼Œ<a href="https://fluid-dev.github.io/hexo-fluid-docs/start/#%E4%B8%BB%E9%A2%98%E7%AE%80%E4%BB%8B">ç‚¹å‡»è¿™é‡Œ</a></p><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="vscodeçš„ç»ˆç«¯æ— æ³•æ‰§è¡ŒhexoæŒ‡ä»¤"><a href="#vscodeçš„ç»ˆç«¯æ— æ³•æ‰§è¡ŒhexoæŒ‡ä»¤" class="headerlink" title="vscodeçš„ç»ˆç«¯æ— æ³•æ‰§è¡ŒhexoæŒ‡ä»¤"></a>vscodeçš„ç»ˆç«¯æ— æ³•æ‰§è¡ŒhexoæŒ‡ä»¤</h3><ol><li>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œpower shell<br>ï¼ˆå¤‡æ³¨ï¼šå³é”®winæ ‡ï¼Œé€‰æ‹© â€œWindows PowerShell(ç®¡ç†å‘˜)â€æ‰“å¼€å³å¯ï¼‰</li><li>è¾“å…¥ set-ExecutionPolicy RemoteSigned å›è½¦</li><li>è¾“å…¥ A æˆ–è€… Y å›è½¦</li></ol><h3 id="Hexoéƒ¨ç½²å‡ºç°é”™è¯¯err-Error-Spawn-failedè§£å†³æ–¹å¼"><a href="#Hexoéƒ¨ç½²å‡ºç°é”™è¯¯err-Error-Spawn-failedè§£å†³æ–¹å¼" class="headerlink" title="Hexoéƒ¨ç½²å‡ºç°é”™è¯¯err: Error: Spawn failedè§£å†³æ–¹å¼"></a>Hexoéƒ¨ç½²å‡ºç°é”™è¯¯err: Error: Spawn failedè§£å†³æ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">##è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</span><br><span class="hljs-built_in">cd</span> é¡¹ç›®åå­—<br><br><span class="hljs-comment">##åˆ é™¤gitæäº¤å†…å®¹æ–‡ä»¶å¤¹</span><br>rm -rf .deploy_git/<br><br><span class="hljs-comment">##æ‰§è¡Œ</span><br>git config --global core.autocrlf <span class="hljs-literal">false</span><br><br><span class="hljs-comment">##æœ€å</span><br>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d<br></code></pre></td></tr></table></figure><p>å¾®ä¿¡æ‰«ä¸€ä¸‹äºŒç»´ç ï¼Œä¸å®šæ—¶åˆ†äº«æœ‰è¶£çš„äº‹æƒ…å“¦ï¼š</p><p><img src="/hexo-blog/img/page/pic.jpg" alt="pic"></p>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HexoåŒä»“è°æˆ˜ï¼šç”¨GitHub Actionsåœ¨è€æ¿çœ¼çš®åº•ä¸‹ä¼˜é›…æ‘¸é±¼</title>
    <link href="/2025/03/15/Hexo%E5%8F%8C%E4%BB%93%E8%B0%8D%E6%88%98/"/>
    <url>/2025/03/15/Hexo%E5%8F%8C%E4%BB%93%E8%B0%8D%E6%88%98/</url>
    
    <content type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ°ã€Šç¨‹åºå‘˜æ‘¸é±¼æŒ‡å—ã€‹ç‰¹åˆ«ç¯‡ï¼ä»Šå¤©æˆ‘ä»¬è¦ç©ä¸€åœºä»£ç ç‰ˆçš„â€ç¢Ÿä¸­è°â€â€”â€”è®©æºç åœ¨ç§æœ‰ä»“åº“â€éšèº«â€ï¼Œè®©é™æ€é¡µé¢åœ¨GitHub Pageså…‰é²œäº®ç›¸ï¼Œæœ€åè¿˜èƒ½å–ç€å’–å•¡çœ‹æœºå™¨äººå¸®ä½ å¹²æ´»ï¼â˜•</p><hr><h2 id="ğŸ•µï¸â™‚ï¸-æ ¸å¿ƒæœºå¯†ï¼šåŒä»“æˆ˜ç•¥"><a href="#ğŸ•µï¸â™‚ï¸-æ ¸å¿ƒæœºå¯†ï¼šåŒä»“æˆ˜ç•¥" class="headerlink" title="ğŸ•µï¸â™‚ï¸ æ ¸å¿ƒæœºå¯†ï¼šåŒä»“æˆ˜ç•¥"></a>ğŸ•µï¸â™‚ï¸ æ ¸å¿ƒæœºå¯†ï¼šåŒä»“æˆ˜ç•¥</h2><h3 id="1-ç‰¹å·¥è£…å¤‡æ¸…å•"><a href="#1-ç‰¹å·¥è£…å¤‡æ¸…å•" class="headerlink" title="1. ç‰¹å·¥è£…å¤‡æ¸…å•"></a>1. ç‰¹å·¥è£…å¤‡æ¸…å•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tree">C:/Users/You/hexo-sourceï¼ˆWin11ç‰¹å·¥å·¥ä½œç«™ï¼‰<br>â”œâ”€â”€ scaffolds/       # æ–‡ç« æ¨¡æ¿<br>â”œâ”€â”€ source/_posts/   # ä½ çš„æ‘¸é±¼ç¬”è®°<br>â””â”€â”€ _config.yml      # æ€»æ§å¼€å…³<br><br>GitHubäº‘ç«¯æŒ‡æŒ¥éƒ¨<br>â”œâ”€â”€ ğŸ”’hexo-sourceï¼ˆç§æœ‰ä»“åº“ï¼‰ â† å†›æƒ…å…­å¤„<br>â”‚   â””â”€â”€ .github/workflows/ â† æœºå™¨äººæ§åˆ¶ä¸­å¿ƒ<br>â””â”€â”€ ğŸªyourname.github.ioï¼ˆå…¬æœ‰ä»“åº“ï¼‰ â† å¯¹å¤–å±•ç¤ºæ©±çª—<br></code></pre></td></tr></table></figure><p><img src="https://media.giphy.com/media/3o6Zt6KHxJTZ5sHrtC/giphy.gif" alt="åŒä»“ä½œæˆ˜ç¤ºæ„å›¾"></p><h3 id="2-ç‰¹å·¥è¡ŒåŠ¨çº²é¢†"><a href="#2-ç‰¹å·¥è¡ŒåŠ¨çº²é¢†" class="headerlink" title="2. ç‰¹å·¥è¡ŒåŠ¨çº²é¢†"></a>2. ç‰¹å·¥è¡ŒåŠ¨çº²é¢†</h3><ul><li><strong>GitHub Pages</strong>ï¼šä½ çš„æ©±çª—ç®¡å®¶ï¼Œåªä¼šå±•ç¤º<code>public/</code>ç›®å½•çš„é™æ€æ–‡ä»¶</li><li><strong>GitHub Actions</strong>ï¼šä½ çš„007ç‰¹å·¥ï¼Œèƒ½åŒæ—¶å®Œæˆâ€å¤‡ä»½æºç â†’ç”Ÿæˆé¡µé¢â†’ç§˜å¯†éƒ¨ç½²â€</li></ul><hr><h2 id="ğŸ› ï¸-ç‰¹å·¥è£…å¤‡é…ç½®æŒ‡å—"><a href="#ğŸ› ï¸-ç‰¹å·¥è£…å¤‡é…ç½®æŒ‡å—" class="headerlink" title="ğŸ› ï¸ ç‰¹å·¥è£…å¤‡é…ç½®æŒ‡å—"></a>ğŸ› ï¸ ç‰¹å·¥è£…å¤‡é…ç½®æŒ‡å—</h2><h3 id="1-åˆ›å»ºç§˜å¯†åŸºåœ°"><a href="#1-åˆ›å»ºç§˜å¯†åŸºåœ°" class="headerlink" title="1. åˆ›å»ºç§˜å¯†åŸºåœ°"></a>1. åˆ›å»ºç§˜å¯†åŸºåœ°</h3><ol><li><p>åœ¨GitHubæ–°å»ºä¸¤ä¸ªä»“åº“ï¼š</p><ul><li>ç§æœ‰ä»“ï¼š<code>hexo-source</code>ï¼ˆå»ºè®®å’Œæœ¬åœ°ç›®å½•åŒåï¼‰</li><li>å…¬æœ‰ä»“ï¼š<code>&lt;ç”¨æˆ·å&gt;.github.io</code>ï¼ˆGitHub Pageså¼ºåˆ¶å‘½åï¼‰</li></ul></li><li><p>åœ¨VSCodeç»ˆç«¯ç»‘å®šç§æœ‰ä»“ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">cd</span> hexo<span class="hljs-literal">-source</span><br>git remote add origin https://github.com/ä½ çš„åå­—/hexo<span class="hljs-literal">-source</span>.git<br></code></pre></td></tr></table></figure></li></ol><h3 id="2-è·å–ç‰¹å·¥è¯ä»¶ï¼ˆGitHub-Tokenï¼‰"><a href="#2-è·å–ç‰¹å·¥è¯ä»¶ï¼ˆGitHub-Tokenï¼‰" class="headerlink" title="2. è·å–ç‰¹å·¥è¯ä»¶ï¼ˆGitHub Tokenï¼‰"></a>2. è·å–ç‰¹å·¥è¯ä»¶ï¼ˆGitHub Tokenï¼‰</h3><ol><li>è®¿é—®<a href="https://github.com/settings/tokens">Tokené¢å‘å¤„</a></li><li>å‹¾é€‰<code>repo</code>å’Œ<code>workflow</code>æƒé™ï¼ˆå°±åƒç»™007é…æªï¼‰</li><li>åœ¨ç§æœ‰ä»“Settingsâ†’Secretsâ†’Actionsæ·»åŠ ï¼š<ul><li>Name: <code>HEXO_DEPLOY_KEY</code>ï¼ˆæ¥å¤´æš—å·ï¼‰</li><li>Value: ç²˜è´´åˆšå¤åˆ¶çš„Tokenï¼ˆåˆ«è®©ä»»ä½•äººçœ‹è§ï¼ï¼‰</li></ul></li></ol><p><img src="https://docs.github.com/assets/cb-78727/images/help/settings/new-repository-secret-button.png" alt="å¯†é’¥é…ç½®å›¾"></p><hr><h2 id="ğŸ¤–-è®­ç»ƒä½ çš„æœºå™¨äººç‰¹å·¥"><a href="#ğŸ¤–-è®­ç»ƒä½ çš„æœºå™¨äººç‰¹å·¥" class="headerlink" title="ğŸ¤– è®­ç»ƒä½ çš„æœºå™¨äººç‰¹å·¥"></a>ğŸ¤– è®­ç»ƒä½ çš„æœºå™¨äººç‰¹å·¥</h2><h3 id="1-åˆ›å»ºæœºå™¨äººæ§åˆ¶ç¨‹åºï¼ˆ-github-workflows-deploy-ymlï¼‰"><a href="#1-åˆ›å»ºæœºå™¨äººæ§åˆ¶ç¨‹åºï¼ˆ-github-workflows-deploy-ymlï¼‰" class="headerlink" title="1. åˆ›å»ºæœºå™¨äººæ§åˆ¶ç¨‹åºï¼ˆ.github/workflows/deploy.ymlï¼‰"></a>1. åˆ›å»ºæœºå™¨äººæ§åˆ¶ç¨‹åºï¼ˆ.github/workflows/deploy.ymlï¼‰</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">æ‘¸é±¼è‡ªåŠ¨æ‰§è¡Œç¨‹åº</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span> ]  <span class="hljs-comment"># ç›‘å¬mainåˆ†æ”¯çš„åŠ¨é™</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-comment"># ç¬¬ä¸€é˜¶æ®µï¼šè·å–è£…å¤‡</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">é»‘è¿›å†›ç«åº“</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>  <span class="hljs-comment"># GitHubå®˜æ–¹å¼€é”å·¥å…·</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">submodules:</span> <span class="hljs-string">recursive</span>   <span class="hljs-comment"># å·èµ°ä¸»é¢˜å­æ¨¡å—</span><br>          <br>      <span class="hljs-comment"># ç¬¬äºŒé˜¶æ®µï¼šæ­¦è£…æœºå™¨äºº</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å®‰è£…Node.js</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">&#x27;18&#x27;</span>       <span class="hljs-comment"># å¿…é¡»å’Œä½ çš„æœ¬åœ°ç‰ˆæœ¬ä¸€è‡´ï¼</span><br>          <br>      <span class="hljs-comment"># ç¬¬ä¸‰é˜¶æ®µï¼šç»„è£…æ­¦å™¨</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">è£…è½½Hexo</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          npm install hexo-cli -g</span><br><span class="hljs-string">          npm ci --prefer-offline  # ç²¾ç¡®å¤åˆ»ä½ çš„æœ¬åœ°ç¯å¢ƒ</span><br><span class="hljs-string"></span>          <br>      <span class="hljs-comment"># ç¬¬å››é˜¶æ®µï¼šå‘åŠ¨æ”»å‡»</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å‘å°„é™æ€å¯¼å¼¹</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">peaceiris/actions-gh-pages@v3</span>  <span class="hljs-comment"># ç¬¬ä¸‰æ–¹å¯¼å¼¹ç³»ç»Ÿ</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">github_token:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.HEXO_DEPLOY_KEY</span> <span class="hljs-string">&#125;&#125;</span> <span class="hljs-comment"># ä½¿ç”¨æ¥å¤´æš—å·</span><br>          <span class="hljs-attr">publish_dir:</span> <span class="hljs-string">./public</span>    <span class="hljs-comment"># å¼¹è¯å­˜æ”¾ä½ç½®</span><br></code></pre></td></tr></table></figure><h3 id="2-å†›ç«åº“é»‘è¯è§£æ"><a href="#2-å†›ç«åº“é»‘è¯è§£æ" class="headerlink" title="2. å†›ç«åº“é»‘è¯è§£æ"></a>2. å†›ç«åº“é»‘è¯è§£æ</h3><table><thead><tr><th>æ­¦å™¨ä»£ç </th><th>å†›ç«å•†</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td><code>actions/checkout@v3</code></td><td>GitHub å®˜æ–¹å‡ºå“</td><td>è·å–ä»“åº“ä»£ç ï¼ˆè¿ä¸»é¢˜æ–‡ä»¶éƒ½ä¸æ”¾è¿‡ï¼‰</td></tr><tr><td><code>peaceiris/actions-gh-pages@v3</code></td><td>ç¬¬ä¸‰æ–¹å¤§ä½¬å¼€å‘</td><td>æŠŠpublicç›®å½•æ¨é€åˆ°GitHub Pages</td></tr></tbody></table><hr><h2 id="ğŸ®-æ—¥å¸¸æ‘¸é±¼æ“ä½œæŒ‡å—"><a href="#ğŸ®-æ—¥å¸¸æ‘¸é±¼æ“ä½œæŒ‡å—" class="headerlink" title="ğŸ® æ—¥å¸¸æ‘¸é±¼æ“ä½œæŒ‡å—"></a>ğŸ® æ—¥å¸¸æ‘¸é±¼æ“ä½œæŒ‡å—</h2><h3 id="1-è¡Œäº‘æµæ°´ä¸‰è¿å‡»"><a href="#1-è¡Œäº‘æµæ°´ä¸‰è¿å‡»" class="headerlink" title="1. è¡Œäº‘æµæ°´ä¸‰è¿å‡»"></a>1. è¡Œäº‘æµæ°´ä¸‰è¿å‡»</h3><ol><li>åœ¨VSCodeæ–°å»ºæ–‡ç« ï¼š<code>hexo new &quot;è€æ¿çœ‹ä¸è§çš„æ‘¸é±¼æŠ€å·§&quot;</code></li><li>æ‰§è¡Œé»„é‡‘æŒ‡ä»¤ï¼š<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy  <span class="hljs-comment"># ç”Ÿæˆ+éƒ¨ç½²åˆ°å…¬æœ‰ä»“</span><br>git add . &amp;&amp; git commit <span class="hljs-literal">-m</span> <span class="hljs-string">&quot;æ›´æ–°äº†æ‘¸é±¼æŒ‡å—&quot;</span> &amp;&amp; git push origin main  <span class="hljs-comment"># æ¨é€æºç åˆ°ç§æœ‰ä»“</span><br></code></pre></td></tr></table></figure></li><li>å–å’–å•¡ç­‰å¾…æœºå™¨äººè‡ªåŠ¨åŒæ­¥ï¼ˆçº¦2åˆ†é’Ÿï¼‰</li></ol><h3 id="2-è¡ŒåŠ¨é—­ç¯éªŒè¯"><a href="#2-è¡ŒåŠ¨é—­ç¯éªŒè¯" class="headerlink" title="2. è¡ŒåŠ¨é—­ç¯éªŒè¯"></a>2. è¡ŒåŠ¨é—­ç¯éªŒè¯</h3><p>âœ… è®¿é—® <code>https://ä½ çš„åå­—.github.io</code> æŸ¥çœ‹æ•ˆæœ<br>âœ… æ£€æŸ¥ç§æœ‰ä»“Actionsæ ‡ç­¾é¡µçš„ç»¿è‰²âˆš<br>âœ… å…¬æœ‰ä»“çš„commitæ˜¾ç¤ºæ¥è‡ªGitHub Actions  </p><p><img src="https://media.giphy.com/media/3o6Zt6KHxJTZ5sHrtC/giphy.gif" alt="éªŒè¯æˆåŠŸ"></p><hr><h2 id="ğŸš¨-ç‰¹å·¥é€ƒç”ŸæŒ‡å—"><a href="#ğŸš¨-ç‰¹å·¥é€ƒç”ŸæŒ‡å—" class="headerlink" title="ğŸš¨ ç‰¹å·¥é€ƒç”ŸæŒ‡å—"></a>ğŸš¨ ç‰¹å·¥é€ƒç”ŸæŒ‡å—</h2><h3 id="1-æœºå™¨äººçªç„¶ç½¢å·¥"><a href="#1-æœºå™¨äººçªç„¶ç½¢å·¥" class="headerlink" title="1. æœºå™¨äººçªç„¶ç½¢å·¥"></a>1. æœºå™¨äººçªç„¶ç½¢å·¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹æœ¬åœ°Nodeç‰ˆæœ¬</span><br>node -v<br><span class="hljs-comment"># æ£€æŸ¥workflowä¸­çš„node-versionæ˜¯å¦ä¸€è‡´</span><br></code></pre></td></tr></table></figure><h3 id="2-ä¸»é¢˜æ–‡ä»¶ç¥ç§˜å¤±è¸ª"><a href="#2-ä¸»é¢˜æ–‡ä»¶ç¥ç§˜å¤±è¸ª" class="headerlink" title="2. ä¸»é¢˜æ–‡ä»¶ç¥ç§˜å¤±è¸ª"></a>2. ä¸»é¢˜æ–‡ä»¶ç¥ç§˜å¤±è¸ª</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># åœ¨VSCodeç»ˆç«¯æ‰§è¡Œ</span><br>git submodule update -<span class="hljs-literal">-init</span> -<span class="hljs-literal">-recursive</span><br></code></pre></td></tr></table></figure><h3 id="3-å¯†é’¥éªŒè¯å¤±è´¥"><a href="#3-å¯†é’¥éªŒè¯å¤±è´¥" class="headerlink" title="3. å¯†é’¥éªŒè¯å¤±è´¥"></a>3. å¯†é’¥éªŒè¯å¤±è´¥</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">- é”™è¯¯æç¤ºï¼šPermission denied (publickey)</span><br><span class="hljs-addition">+ è§£å†³æ–¹æ¡ˆï¼š</span><br>  1. é‡æ–°ç”ŸæˆTokenå¹¶æ›´æ–°Secrets<br>  2. æ£€æŸ¥å…¬æœ‰ä»“Settingsâ†’Deploy keysæ˜¯å¦æ·»åŠ å…¬é’¥<br></code></pre></td></tr></table></figure><hr><h2 id="ğŸ”-ç‰¹å·¥ç»ˆæé—®ç­”"><a href="#ğŸ”-ç‰¹å·¥ç»ˆæé—®ç­”" class="headerlink" title="ğŸ” ç‰¹å·¥ç»ˆæé—®ç­”"></a>ğŸ” ç‰¹å·¥ç»ˆæé—®ç­”</h2><h3 id="Q1ï¼šå¦‚æœåªæƒ³ç”¨GitHub-Pagesæ€ä¹ˆç©ï¼Ÿ"><a href="#Q1ï¼šå¦‚æœåªæƒ³ç”¨GitHub-Pagesæ€ä¹ˆç©ï¼Ÿ" class="headerlink" title="Q1ï¼šå¦‚æœåªæƒ³ç”¨GitHub Pagesæ€ä¹ˆç©ï¼Ÿ"></a>Q1ï¼šå¦‚æœåªæƒ³ç”¨GitHub Pagesæ€ä¹ˆç©ï¼Ÿ</h3><p>Aï¼šé€‚åˆä½›ç³»æ‘¸é±¼é€‰æ‰‹ï¼Œé…ç½®<code>_config.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">https://github.com/ä½ çš„åå­—/ä½ çš„åå­—.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ¯æ¬¡æ‰‹åŠ¨æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean &amp;&amp; hexo deploy  <span class="hljs-comment"># å°±åƒæ‰‹åŠ¨å¾€æ©±çª—é‡Œæ‘†å•†å“</span><br></code></pre></td></tr></table></figure><h3 id="Q2ï¼šhexo-deployå’Œgit-pushæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Q2ï¼šhexo-deployå’Œgit-pushæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Q2ï¼šhexo deployå’Œgit pushæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Q2ï¼šhexo deployå’Œgit pushæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Aï¼šè¿™æ˜¯åŒçº¿ä½œæˆ˜çš„ç§˜å¯†é€šé“ï¼š</p><ul><li><code>hexo deploy</code>ï¼šæŠŠ<code>public/</code>æ¨é€åˆ°<strong>å…¬æœ‰ä»“</strong>ï¼ˆå±•ç¤ºæ©±çª—ï¼‰  </li><li><code>git push</code>ï¼šæŠŠæºç æ¨é€åˆ°<strong>ç§æœ‰ä»“</strong>ï¼ˆè§¦å‘æœºå™¨äººè‡ªåŠ¨å·¥ä½œï¼‰<br>å½“ä½¿ç”¨GitHub Actionsåï¼Œ<code>hexo deploy</code>å¯é€€ä¼‘äº†â€”â€”æœºå™¨äººä¼šè‡ªåŠ¨å¸®ä½ æ‘†æ©±çª—ï¼</li></ul><h3 id="Q3ï¼šæœºå™¨äººæ€ä¹ˆæ‰“é€šä¸¤ä¸ªä»“åº“ï¼Ÿ"><a href="#Q3ï¼šæœºå™¨äººæ€ä¹ˆæ‰“é€šä¸¤ä¸ªä»“åº“ï¼Ÿ" class="headerlink" title="Q3ï¼šæœºå™¨äººæ€ä¹ˆæ‰“é€šä¸¤ä¸ªä»“åº“ï¼Ÿ"></a>Q3ï¼šæœºå™¨äººæ€ä¹ˆæ‰“é€šä¸¤ä¸ªä»“åº“ï¼Ÿ</h3><p>Aï¼šé€šè¿‡ä»¥ä¸‹é»‘é­”æ³•å®ç°è·¨ä»“æ“æ§ï¼š</p><ol><li><strong>ç›‘å¬ç§æœ‰ä»“</strong>çš„git pushäº‹ä»¶  </li><li>ç”¨<code>HEXO_DEPLOY_KEY</code>è·å¾—<strong>å…¬æœ‰ä»“</strong>çš„å†™å…¥æƒé™  </li><li>ç”Ÿæˆæ–°çš„<code>public/</code>å¹¶å¼ºåˆ¶æ¨é€åˆ°å…¬æœ‰ä»“<br>æ•´ä¸ªè¿‡ç¨‹å°±åƒç”¨ç§æœ‰ä»“çš„é’¥åŒ™ï¼Œæ‰“å¼€äº†å…¬æœ‰ä»“çš„ä¿é™©æŸœï¼</li></ol><table><thead><tr><th>æ­¥éª¤</th><th>ç§æœ‰ä»“æ“ä½œ</th><th>å…¬æœ‰ä»“æ•ˆæœ</th></tr></thead><tbody><tr><td>1</td><td>æ¨é€æºç åˆ°<code>hexo-source</code></td><td>è§¦å‘GitHub Actions</td></tr><tr><td>2</td><td>æœºå™¨äººè¯»å–Token</td><td>è·å¾—è®¿é—®å…¬æœ‰ä»“çš„æƒé™</td></tr><tr><td>3</td><td>ç”Ÿæˆ<code>public/</code></td><td>å¼ºåˆ¶æ¨é€åˆ°<code>yourname.github.io</code>çš„mainåˆ†æ”¯</td></tr></tbody></table><h3 id="Q4ï¼šä¸ºä»€ä¹ˆgit-pushåGitHub-Pagesä¼šè‡ªåŠ¨æ›´æ–°ï¼Ÿ"><a href="#Q4ï¼šä¸ºä»€ä¹ˆgit-pushåGitHub-Pagesä¼šè‡ªåŠ¨æ›´æ–°ï¼Ÿ" class="headerlink" title="Q4ï¼šä¸ºä»€ä¹ˆgit pushåGitHub Pagesä¼šè‡ªåŠ¨æ›´æ–°ï¼Ÿ"></a>Q4ï¼šä¸ºä»€ä¹ˆgit pushåGitHub Pagesä¼šè‡ªåŠ¨æ›´æ–°ï¼Ÿ</h3><p>Aï¼šå› ä¸ºGitHub Actionsç›‘å¬äº†ä½ çš„æ¨é€äº‹ä»¶ï¼Œè§¦å‘è‡ªåŠ¨åŒ–éƒ¨ç½²æµæ°´çº¿ï¼Œå°±åƒæœ‰ä¸ªæœºå™¨äººåœ¨å¸®ä½ æŒ‰éƒ¨ç½²æŒ‰é’®ï¼<br>peaceiris/actions-gh-pagesè¿™ä¸ªç¬¬ä¸‰æ–¹æ’ä»¶ä¼šé€šè¿‡Tokenè‡ªåŠ¨è¯†åˆ«ä½ çš„è´¦æˆ·ï¼ŒæŠŠpublic/æ¨é€åˆ°&lt;ç”¨æˆ·å&gt;.github.ioä»“åº“</p><h3 id="Q5ï¼špublicç›®å½•ä¼šå‡ºç°åœ¨ç§æœ‰ä»“å—ï¼Ÿ"><a href="#Q5ï¼špublicç›®å½•ä¼šå‡ºç°åœ¨ç§æœ‰ä»“å—ï¼Ÿ" class="headerlink" title="Q5ï¼špublicç›®å½•ä¼šå‡ºç°åœ¨ç§æœ‰ä»“å—ï¼Ÿ"></a>Q5ï¼špublicç›®å½•ä¼šå‡ºç°åœ¨ç§æœ‰ä»“å—ï¼Ÿ</h3><p>Aï¼šç»å¯¹ä¸è¡Œï¼åœ¨ç§æœ‰ä»“çš„.gitignoreæ·»åŠ ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/public</span><br><span class="hljs-string">/node_modules</span><br>*<span class="hljs-string">.log</span><br><span class="hljs-string">.deploy_git/</span><br></code></pre></td></tr></table></figure><h3 id="Q6ï¼šéƒ¨ç½²å¯†é’¥åˆ°åº•æ”¾åœ¨å“ªï¼Ÿ"><a href="#Q6ï¼šéƒ¨ç½²å¯†é’¥åˆ°åº•æ”¾åœ¨å“ªï¼Ÿ" class="headerlink" title="Q6ï¼šéƒ¨ç½²å¯†é’¥åˆ°åº•æ”¾åœ¨å“ªï¼Ÿ"></a>Q6ï¼šéƒ¨ç½²å¯†é’¥åˆ°åº•æ”¾åœ¨å“ªï¼Ÿ</h3><p>Aï¼š<code>HEXO_DEPLOY_KEY</code>æ°¸è¿œæ”¾åœ¨<strong>ç§æœ‰ä»“</strong>çš„Secretsé‡Œï¼</p><h3 id="Q7ï¼šHEXO-DEPLOY-KEY-æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#Q7ï¼šHEXO-DEPLOY-KEY-æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="Q7ï¼šHEXO_DEPLOY_KEY æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>Q7ï¼šHEXO_DEPLOY_KEY æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>Aï¼š<code>HEXO_DEPLOY_KEY</code>çš„çœŸé¢ç›®</p><ul><li><strong>èº«ä»½</strong>ï¼šè¿™æ˜¯ä½ åœ¨GitHubç”Ÿæˆçš„<a href="https://github.com/settings/tokens">Classic Token</a></li><li><strong>è¶…èƒ½åŠ›</strong>ï¼šæ‹¥æœ‰<code>repo</code>æƒé™çš„Tokenå¯ä»¥æ“æ§ä½ è´¦æˆ·ä¸‹çš„<strong>æ‰€æœ‰ä»“åº“</strong></li><li><strong>å­˜æ”¾ä½ç½®</strong>ï¼šè—åœ¨<strong>ç§æœ‰ä»“</strong>çš„Secretsé‡Œï¼ˆå°±åƒæŠŠæ ¸å¼¹æŒ‰é’®æ”¾åœ¨è‡ªå®¶ä¿é™©æŸœï¼‰</li></ul><hr><blockquote><p><strong>æ‘¸é±¼å¤‡å¿˜å½•</strong>ï¼š<br>æƒ³è¦æ›´å¿«çš„åŠ è½½é€Ÿåº¦ï¼Ÿè¯•è¯•åœ¨Workflowæ·»åŠ CDNéƒ¨ç½²æ­¥éª¤ï¼<br>è®°ä½ï¼šæœ€é«˜çº§çš„æ‘¸é±¼æ˜¯è®©ä»£ç æ›¿ä½ å·¥ä½œï¼Œè€Œä½ ï¼Œè´Ÿè´£å–å’–å•¡ã€‚<a href="https://hexo.io/docs/github-pages">Hexoå®˜æ–¹æ–‡æ¡£</a>æœ‰æ›´å¤šé»‘ç§‘æŠ€ï¼</p></blockquote><p><img src="https://media.giphy.com/media/l0MYNB04rBb26sLS8/giphy.gif" alt="ä»»åŠ¡å®Œæˆ"></p><p>``` </p><p><strong>æ‘¸é±¼è®¤è¯è€ƒè¯•</strong> ğŸ¯  </p><ol><li>è®¿é—®ä½ çš„GitHub Pagesé¡µé¢ â†’ æˆåŠŸ+10åˆ†  </li><li>ç§æœ‰ä»“Actionsæ˜¾ç¤ºç»¿è‰²âˆš â†’ æˆåŠŸ+20åˆ†  </li><li>æœ¬åœ°publicç›®å½•å¹²å‡€å¦‚æ–° â†’ æˆåŠŸ+30åˆ†<br>æ€»åˆ†â‰¥50åˆ† â†’ æ­å–œè·å¾—â€æ‘¸é±¼å¤§å¸ˆâ€ç§°å·ï¼ ğŸ†</li></ol><blockquote><p><strong>ç‰¹åˆ«å½©è›‹</strong>ï¼šåœ¨å…¬æœ‰ä»“çš„<code>Settingsâ†’Pages</code>é‡Œå¼€å¯Enforce HTTPSï¼Œç»™ä½ çš„æ©±çª—åŠ ä¸Šé‡‘åº“é˜²ç›—é—¨ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼ï¼ˆæ­é…è‡ªå®šä¹‰æ³¨è§£+æšä¸¾ï¼‰</title>
    <link href="/2021/12/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
    <url>/2021/12/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><strong>é“¾æ¥</strong>ï¼š<br><a href="https://gitee.com/jasoninterface/design_pattern.git">è¿™é‡Œå°±æ˜¯Demoçš„é“¾æ¥åœ°å€ï¼Œä»…ä¾›å‚è€ƒå“¦</a></p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ç­–ç•¥æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å¤šç§æ–¹æ³•çš„æ„æ€ã€‚ç›¸ä¿¡åœ¨äº’è”ç½‘ä¸Šå„ç§èµ„æ–™éƒ½é£æ¥é£å»çš„æƒ…å†µï¼Œéƒ½çŸ¥é“è¿™ä¸ªä½œç”¨äº†å§ï¼Œ<br>æˆ‘ä¸»è¦è¯´ä¸€ä¸‹ä¸ªäººçš„ç†è§£ã€‚</p><p>ä¸€èˆ¬ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œéƒ½ä¼šæ­é…æ¨¡æ¿æ¨¡å¼ï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li><strong>ç­–ç•¥æ¨¡å¼åªæ˜¯å…³æ³¨æ–¹æ³•é‡Œé¢çš„å®ç°é€»è¾‘ã€‚</strong></li><li><strong>æ¨¡æ¿æ¨¡å¼åªæ˜¯å…³æ³¨äºæŠŠå¤šä¸ªæ–¹æ³•æŠ½ç¦»å‡ºæ¥ï¼Œæ³¨é‡äºæ­¥éª¤ã€‚</strong></li></ul><p>å½“ç„¶ï¼Œä¹‹æ‰€ä»¥æ­é…æ¨¡æ¿æ¨¡å¼ï¼Œä¸€èˆ¬éƒ½æ˜¯æ–¹æ³•æ¯”è¾ƒå¤šï¼Œè€Œä¸”éƒ½å…·æœ‰å…¬å…±æ€§è´¨ï¼Œæ‰€ä»¥æ‰ä¼šæŠ½ç¦»å‡ºæ¥ã€‚</p><p>æœ¬æ•™ç¨‹ä¸»è¦ä½¿ç”¨ç­–ç•¥æ¨¡å¼+æ¨¡æ¿æ¨¡å¼+è‡ªå®šä¹‰æ³¨è§£+æšä¸¾</p><p>ä¸‹é¢ç›´æ¥å¼€æ’¸å§~~~</p><h2 id="å¼€æ’¸"><a href="#å¼€æ’¸" class="headerlink" title="å¼€æ’¸"></a>å¼€æ’¸</h2><p>1ã€å»åˆ°springå®˜ç½‘ï¼Œç›´æ¥æ­å»ºä¸€ä¸ªspring booté¡¹ç›®ã€‚</p><p>2ã€åˆ›å»ºæšä¸¾å€¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:20<br> **/<br>public enum PayCodeEnum &#123;<br><br>    PC_PAY(<span class="hljs-string">&quot;PC_PAY&quot;</span>,<span class="hljs-string">&quot;PCç«¯æ”¯ä»˜&quot;</span>),<br>    MOBILE_PAY(<span class="hljs-string">&quot;MOBILE_PAY&quot;</span>,<span class="hljs-string">&quot;æ‰‹æœºç«¯æ”¯ä»˜&quot;</span>)<br><br>    ;<br><br>    private String key;<br>    private String value;<br><br>    PayCodeEnum(String key, String value) &#123;<br>        this.key = key;<br>        this.value = value;<br>    &#125;<br><br>    public String <span class="hljs-function"><span class="hljs-title">getKey</span></span>() &#123;<br>        <span class="hljs-built_in">return</span> key;<br>    &#125;<br><br>    public String <span class="hljs-function"><span class="hljs-title">getValue</span></span>() &#123;<br>        <span class="hljs-built_in">return</span> value;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:24<br> **/<br>@Target(&#123;ElementType.TYPE&#125;)<br>@Retention(RetentionPolicy.RUNTIME)<br>@Documented<br>public @interface PayChannel &#123;<br>    PayCodeEnum value();<br>&#125;<br></code></pre></td></tr></table></figure><p>4ã€åˆ›å»ºå…¬å…±æ¥å£ï¼Œè¿™é‡Œå®šä¹‰äº†å…·ä½“æä¾›ç»™å¤–éƒ¨çš„æ¥å£ï¼Œå°±æ˜¯å…¥å£å˜›ã€‚ä½ æ‡‚çš„~</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:11<br> **/<br>public interface IBizService &#123;<br><br>    void pay();<br><br>    void refund();<br>&#125;<br></code></pre></td></tr></table></figure><p>5ã€åˆ›å»ºæŠ½è±¡ç±»ï¼Œè¯¥ç±»å°±æ˜¯ç”¨æ¥å°è£…ç²’åº¦æ¯”è¾ƒå¤§çš„æ–¹æ³•ï¼Œç„¶åä½¿ç”¨æ¨¡æ¿æ–¹æ³•æŠ½ç¦»å…·ä½“çš„æ–¹æ³•æ­¥éª¤ã€‚~</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:12<br> **/<br>@Slf4j<br>@Component<br>public abstract class BizAbstractService implements IBizService &#123;<br><br>    public abstract void verify();<br><br>    public abstract void buildParams();<br><br>    private void <span class="hljs-function"><span class="hljs-title">handlePay</span></span>()&#123;<br>        log.info(<span class="hljs-string">&quot;æ”¯ä»˜æˆåŠŸ&quot;</span>);<br>    &#125;<br><br>    private void <span class="hljs-function"><span class="hljs-title">handleRefund</span></span>()&#123;<br>        log.info(<span class="hljs-string">&quot;é€€æ¬¾æˆåŠŸ&quot;</span>);<br>    &#125;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">pay</span></span>() &#123;<br>        verify();<br>        handlePay();<br>    &#125;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">refund</span></span>() &#123;<br>        buildParams();<br>        handleRefund();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>6ã€åˆ›å»ºåŠ è½½ç±»ï¼Œæˆ‘å–œæ¬¢ç”¨factoryæ¥å‘½åï¼Œè™½ç„¶ä¸æ˜¯ä¸ªå·¥å‚ç±»ï¼Œä¸è¿‡å°±æ˜¯æƒ³è±¡ä¸€ä¸ªä¸“é—¨æŠŠç­–ç•¥åŠ è½½åˆ°ä¸€ä¸ªå®¹å™¨é‡Œé¢çš„å·¥å‚ï¼GO</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:04<br> **/<br>@Component<br>public class BizFactory implements ApplicationContextAware, ApplicationListener&lt;ContextRefreshedEvent&gt; &#123;<br><br>    private ApplicationContext applicationContext;<br><br>    // è¿™ä¸ªå°±æ˜¯å®¹å™¨å•¦~ï¼Œå°±åƒspringå®¹å™¨ä¸€æ ·å‘—ã€‚<br>    private static final Map&lt;String, IBizService&gt; strategys = new ConcurrentHashMap&lt;&gt;();<br><br>    public IBizService getStrategy(String channel)&#123;<br>        // è¿™é‡Œå¯ä»¥æä¾›ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œåˆ°åº•ç”¨ä»€ä¹ˆç­–ç•¥ï¼Œé€šè¿‡å‚æ•°å®šä¹‰<br>         <span class="hljs-built_in">return</span> Optional.ofNullable(strategys.get(channel))<br>            .orElseThrow(<br>                () -&gt;<br>                    new IllegalStateException(<span class="hljs-string">&quot;æ‰¾ä¸åˆ°è¯¥ç­–ç•¥:&quot;</span> + channel));<br>    &#125;<br><br>    @Override<br>    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;<br>        this.applicationContext = applicationContext;<br>    &#125;<br><br>    private synchronized void <span class="hljs-function"><span class="hljs-title">init</span></span>()&#123;<br>        // è¿™ä¸ªæ–¹æ³•å°±æ˜¯è·å–å®ç°ç±»æŸä¸ªæ¥å£çš„æ‰€æœ‰ç±»ï¼Œå¾ˆæœ‰ç”¨çš„å“¦ï¼Œå¼€å‘çš„æ—¶å€™ç»™ä½ å¾ˆå¤§çš„ä¾¿æ·æ€§ã€‚<br>        Map&lt;String, IBizService&gt; strategyMap = applicationContext.getBeansOfType(IBizService.class);<br>        // è¿™é‡Œå°±æ˜¯å›´æ®´äº†è£…13è€Œå·²ï¼Œç”¨äº†æµçš„æ–¹å¼ï¼Œé«˜å¤§ä¸Šç‚¹æœ‰æœ¨æœ‰ï¼Ÿ<br>        strategyMap.forEach(<br>            (name, strategy) -&gt; &#123;<br>                PayChannel channel =<br>                    Optional.ofNullable(strategy.getClass().getAnnotation(PayChannel.class))<br>                        .orElseThrow(<br>                            () -&gt; new IllegalStateException(<span class="hljs-string">&quot;æ³¨å†Œç­–ç•¥å¤±è´¥:&quot;</span> + name));<br>                strategys.putIfAbsent(channel.value().getKey(), strategy);<br>            &#125;);<br>    &#125;<br><br>    // è¿™é‡Œæ˜¯åŠ è½½ç­–ç•¥çš„æ—¶æœºï¼Œå…¶å®ä¹Ÿå¯ä»¥ç”¨æ³¨è§£ï¼Œå°±ä¸ç”¨å®ç° ApplicationListener&lt;ContextRefreshedEvent&gt;<br>    @Override<br>    public void onApplicationEvent(ContextRefreshedEvent event) &#123;<br>        init();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>7ã€åˆ›å»ºä¸¤ä¸ªç­–ç•¥ï¼Œä¸€ä¸ªæ˜¯PCç«¯ï¼Œä¸€ä¸ªæ˜¯ç§»åŠ¨ç«¯~</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:27<br> **/<br>@Service<br>@Slf4j<br>@PayChannel(value = PayCodeEnum.MOBILE_PAY)<br>public class PayByMobileService extends BizAbstractService &#123;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">verify</span></span>() &#123;<br>        log.info(<span class="hljs-string">&quot;æ‰‹æœºç«¯æ ¡éªŒå‚æ•°&quot;</span>);<br>    &#125;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">buildParams</span></span>() &#123;<br>        log.info(<span class="hljs-string">&quot;æ‰‹æœºç«¯æ„å»ºé€€æ¬¾å‚æ•°&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">/**<br> * @description:<br> * @author: gongjuncheng<br> * @date: 2021-12-12 21:25<br> **/<br>@Service<br>@Slf4j<br>@PayChannel(value = PayCodeEnum.PC_PAY)<br>public class PaybyPcService extends BizAbstractService &#123;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">verify</span></span>() &#123;<br>        log.info(<span class="hljs-string">&quot;PCç«¯æ ¡éªŒå‚æ•°&quot;</span>);<br>    &#125;<br><br>    @Override<br>    public void <span class="hljs-function"><span class="hljs-title">buildParams</span></span>() &#123;<br>        log.info(<span class="hljs-string">&quot;PCç«¯æ„å»ºé€€æ¬¾å‚æ•°&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>8ã€å¼€å§‹æµ‹è¯•~ï¼Œä¸å¤šBB</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">@SpringBootTest<br>class PatternApplicationTests &#123;<br><br>@Resource<br>private BizFactory factory;<br><br>@Test<br>void <span class="hljs-function"><span class="hljs-title">contextLoads</span></span>() &#123;<br>factory.getStrategy(PayCodeEnum.PC_PAY.getKey()).pay();<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å¾®ä¿¡æ‰«ä¸€ä¸‹äºŒç»´ç ï¼Œä¸å®šæ—¶åˆ†äº«æœ‰è¶£çš„äº‹æƒ…å“¦ï¼š</p><p><img src="/hexo-blog/img/page/pic.jpg" alt="pic"></p>]]></content>
    
    
    <categories>
      
      <category>è®¾è®¡æ¨¡å¼</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
